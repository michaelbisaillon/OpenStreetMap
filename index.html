<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Extraction de données sur les entreprises avec OSM - Le cas de la ville de Chambly</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="collect_documentation_files/libs/clipboard/clipboard.min.js"></script>
<script src="collect_documentation_files/libs/quarto-html/quarto.js"></script>
<script src="collect_documentation_files/libs/quarto-html/popper.min.js"></script>
<script src="collect_documentation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="collect_documentation_files/libs/quarto-html/anchor.min.js"></script>
<link href="collect_documentation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="collect_documentation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="collect_documentation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="collect_documentation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="collect_documentation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="collect_documentation_files/libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<script src="collect_documentation_files/libs/jquery-1.12.4/jquery.min.js"></script>
<link href="collect_documentation_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="collect_documentation_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="collect_documentation_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="collect_documentation_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="collect_documentation_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="collect_documentation_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="collect_documentation_files/libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="collect_documentation_files/libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="collect_documentation_files/libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Extraction de données sur les entreprises avec OSM - Le cas de la ville de Chambly</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Auteur: Michaël Bisaillon</p>
<p>Date: 15 octobre 2023</p>
<section id="objectif" class="level2">
<h2 class="anchored" data-anchor-id="objectif">Objectif</h2>
<p>L’objectif est de documenter le processus d’extraction de données sur les entreprises dans une ville avec OpenStreetMap (OSM) alors qu’il n’existe aucune données officielles disponibles au préalable. Nous entendons par données officielles des données ouvertes offertes par la municipalité.</p>
<p>Pour arriver à nos fins, nous allons utiliser R et les paquets suivants:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le paquet osmdata nous permet de télécharger directement les données d’OSM.</p>
</section>
<section id="choisir-une-ville" class="level2">
<h2 class="anchored" data-anchor-id="choisir-une-ville">1. Choisir une ville</h2>
<p>La première étape est de choisir une ville à étudier. Dans notre exemple, nous allons prendre la ville de Chambly au Québec.</p>
</section>
<section id="déterminer-les-limites-géographiques" class="level2">
<h2 class="anchored" data-anchor-id="déterminer-les-limites-géographiques">2. Déterminer les limites géographiques</h2>
<p>La première chose à faire, c’est de connaître les limites géographique de la ville de Chambly. Pour ce faire, il est possible de trouver sur le <a href="https://www12.statcan.gc.ca/census-recensement/2021/geo/sip-pis/boundary-limites/index2021-fra.cfm?year=21">site web de Statistiques Canada</a> le fichiers des limites des subdivisions de recensement (SDR), qui corresponds aux territoires des différentes villes au Canada. Voici la définition d’une SDR:</p>
<blockquote class="blockquote">
<p><em>Une municipalité ou une région jugée équivalente à des fins statistiques (p.&nbsp;ex., une réserve indienne ou un territoire non organisé). Le statut de municipalité est défini par les lois en vigueur dans chaque province et territoire au Canada.</em></p>
<p><em>Source: <a href="https://www12.statcan.gc.ca/census-recensement/2011/ref/dict/geo012-fra.cfm">Statistiques Canada</a></em></p>
</blockquote>
<p>Nous avons téléchargé et décompressé le fichier des SDR dans un sous-dossier du projet intitulé ‘data’. Une fois fait, il faut filtrer le fichier pour extraire les limites de la ville de Chambly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Charger le fichier et nettoyer le formatage des noms de colonnes</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>SDR <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data//lsdr000b21a_f//lsdr000b21a_f.shp"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Filtrer la SDR de la ville de Chambly</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>SDR.chambly <span class="ot">&lt;-</span> SDR <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sdrnom <span class="sc">==</span> <span class="st">"Chambly"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Reprojeter de NAD83 / Statistics Canada Lambert à EPSG:4326</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>SDR.chambly <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(SDR.chambly, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Visualiser le territoire de Chambly</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">|&gt;</span> </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addPolygons</span>(<span class="at">data =</span> SDR.chambly, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">opacity =</span> <span class="dv">1</span>, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">weight =</span> <span class="dv">1</span>, </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">fillOpacity =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6fc31a4c726a55b3f0a3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6fc31a4c726a55b3f0a3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-73.2732907241855,-73.2732804203227,-73.27271991158,-73.2694829036572,-73.2694517339228,-73.2671621957835,-73.2645863934244,-73.2620105177128,-73.2611279868106,-73.2596932515875,-73.2567033654378,-73.2544530022947,-73.2568373983497,-73.2578659272733,-73.2575002390241,-73.2570190164631,-73.2558289400512,-73.2557000858642,-73.2555089284702,-73.254915402035,-73.2545154895953,-73.2538369366937,-73.2533788176766,-73.2527361660814,-73.2525088523635,-73.2523599067743,-73.2519941033572,-73.2518647338642,-73.2517197122686,-73.250756598907,-73.2505000103079,-73.2502703887768,-73.2502361007305,-73.2502137907089,-73.2502015164414,-73.2499681229196,-73.2488754856336,-73.2482179314574,-73.2482170427259,-73.2482168030423,-73.2486874245392,-73.2490258643336,-73.2493221823268,-73.2493250870829,-73.2493333005515,-73.2493540149489,-73.2492087907552,-73.2491847263313,-73.2501604229307,-73.2633942055526,-73.2662816004771,-73.2772098768563,-73.2822188498092,-73.2822341050894,-73.2823384087266,-73.2828081495546,-73.2834155005785,-73.2840601901386,-73.2841577149372,-73.2842365695484,-73.2889149494901,-73.2897337244401,-73.2922301664909,-73.2930574438697,-73.2955531852946,-73.2956468364337,-73.2976090902761,-73.299117536337,-73.3000386219638,-73.3028546283819,-73.3057927604864,-73.3081280307318,-73.3083433951971,-73.3085874229454,-73.3129439850875,-73.3132435833904,-73.3135911594172,-73.3149079221471,-73.3151466360118,-73.315293787652,-73.3154149597335,-73.3158719207488,-73.3156709368451,-73.3156521888218,-73.3152552688006,-73.3114584441131,-73.3114673679402,-73.3182110624761,-73.3184420997462,-73.3194088254131,-73.3268299970936,-73.3288896000613,-73.3291052407531,-73.3293650622841,-73.3293140060706,-73.3289810868241,-73.3285843893322,-73.3284054023138,-73.3274852027326,-73.3273318993113,-73.3272550889523,-73.3271912100105,-73.3270121140182,-73.3269736116503,-73.3268199923938,-73.3266150088699,-73.3264864105434,-73.3263961102803,-73.3263568002135,-73.3263308937947,-73.3262663956154,-73.3261764928724,-73.3260483982845,-73.325869217342,-73.325459806861,-73.3252167908882,-73.3245139186037,-73.3243732082415,-73.3240532849733,-73.3237718051208,-73.3236308925726,-73.3235668888232,-73.3235282787848,-73.3234511169694,-73.3233737958496,-73.3232312963723,-73.3230896968462,-73.3229617048994,-73.322795204023,-73.3226161857838,-73.3222328153181,-73.3220665975444,-73.3209170201563,-73.3208021069561,-73.3206233170934,-73.3203036030509,-73.32020130804,-73.3199966163344,-73.3195612885783,-73.3193820187217,-73.3191510931419,-73.3188306139168,-73.3186513107031,-73.3182802133947,-73.3176023987435,-73.3170652131464,-73.3168094031078,-73.3165917983223,-73.3162077018599,-73.3160665893249,-73.3158227948873,-73.3157071005435,-73.3155142041438,-73.3154241850713,-73.3153216041926,-73.3152192849325,-73.3150916083871,-73.3149255847118,-73.3141985209302,-73.313420316797,-73.3130642497685,-73.3129605979222,-73.3127048939215,-73.3125259828502,-73.3122190825995,-73.3118350854233,-73.3116557985795,-73.311463317068,-73.3113221046372,-73.3112832956671,-73.3112569925768,-73.311345394688,-73.3115481034344,-73.3116869101106,-73.311699383106,-73.3116725044426,-73.3115822049952,-73.3115053121583,-73.311325795508,-73.3110956134465,-73.310942197582,-73.3106226973981,-73.3104309903391,-73.3100095030652,-73.309754201209,-73.309626611327,-73.3093329119787,-73.3089752944149,-73.3086686018546,-73.3082468003875,-73.3080676871795,-73.3078501932838,-73.3076449045872,-73.3075167107109,-73.3074523196375,-73.3073623917273,-73.3073449240424,-73.3073362005706,-73.3073485073824,-73.307398996877,-73.3074879894858,-73.307755408471,-73.3081124993694,-73.3083039126216,-73.3084824924751,-73.3091076167231,-73.3092607078037,-73.3096436184509,-73.3104865967488,-73.3111896161546,-73.3118286017997,-73.312084102933,-73.312275493305,-73.3124031947072,-73.31263300802,-73.312798910694,-73.3129136058419,-73.3129899116415,-73.3129637121703,-73.3128098038012,-73.3124767883365,-73.3122976054034,-73.3121055968904,-73.3118112102546,-73.3112610800366,-73.310826409721,-73.3105323199541,-73.3104172162522,-73.3103404180808,-73.3102506809688,-73.3099945933559,-73.309533208546,-73.3093664139823,-73.3093275971996,-73.3093268058255,-73.3093643899094,-73.309367854375,-73.3093682693531,-73.3093768034059,-73.3094654097064,-73.3095279790279,-73.3096040885188,-73.309641495068,-73.3096526089277,-73.3095627138805,-73.3094599830518,-73.30916460061,-73.308689814144,-73.3083684036109,-73.3082271940312,-73.3078297945688,-73.3072660201805,-73.3071635010678,-73.3071121010292,-73.3068813939724,-73.3068555858167,-73.3065095105958,-73.3060858003931,-73.3059696123624,-73.3059560084649,-73.3059551077334,-73.3060178101719,-73.3061192905773,-73.3062325844409,-73.3062318943878,-73.3062127851034,-73.3062057099251,-73.3061926973534,-73.3061793386489,-73.3060119824819,-73.3058963925728,-73.3055876169453,-73.3055484910484,-73.3054451895357,-73.3053547895009,-73.305341508718,-73.3053161811236,-73.3051896057672,-73.2931323910137,-73.2920055258535,-73.2904880848828,-73.2826022879486,-73.2810769708284,-73.2804462106877,-73.2773195020087,-73.2742581621043,-73.2736762527984,-73.2736624331615,-73.2733997226938,-73.273347050249,-73.2733252218361,-73.2732907241855],"lat":[45.4507937756875,45.4507272852428,45.4506308750097,45.4497853090569,45.4497750032253,45.4490181364777,45.4479044721819,45.4466054882803,45.4460516177343,45.4450346830052,45.441814659061,45.4391989208605,45.4387270393082,45.4385667459738,45.4383367312438,45.4379879451411,45.437030542865,45.43682993468,45.4365323149993,45.4355182687835,45.4349939666082,45.4342090905778,45.4330867790038,45.4318029959341,45.4312762137213,45.4309749270639,45.429368252447,45.4290020244277,45.4287331949859,45.4263954770613,45.4258099922313,45.4248273553153,45.4246644144349,45.4245249046004,45.4244482884404,45.4239806331482,45.42342786475,45.4214508794076,45.4201497720607,45.4198000802522,45.4177986151295,45.4163592900608,45.4146341462301,45.4146171794125,45.4145828041267,45.4144958730996,45.4137934472054,45.4134940776596,45.413395453179,45.4123159043429,45.4098895749462,45.4087659819976,45.4087114082999,45.4102257169185,45.4104181978712,45.4103604986639,45.4105203880456,45.4107201173351,45.4104354643937,45.4101960282472,45.3956071418315,45.3930775592759,45.3948176106488,45.3953958524246,45.3971481034946,45.3972173114496,45.3985985001395,45.3996602535183,45.4003076418573,45.4022751394849,45.4043559018109,45.4059777067897,45.4061311685818,45.4063764413383,45.4092927886714,45.4095085879157,45.409759035304,45.4106804951353,45.4108452156275,45.4109468014087,45.4110303642878,45.4113426003489,45.4119521901637,45.4120092056146,45.4133564957611,45.4247888703691,45.4247951454885,45.4295410896238,45.4296997809874,45.4304012421499,45.4357852044065,45.4371099043581,45.4370994865833,45.4370653039056,45.4371022077293,45.4372726032237,45.4374070064972,45.43744269044,45.4374142892794,45.4374141060086,45.4374228890483,45.4374318128297,45.4375036066821,45.437530605175,45.437593188365,45.4377369130383,45.4379887102963,45.4383124890909,45.4386004086995,45.4387174069306,45.4388972036157,45.4390411027437,45.4391488880233,45.4392294931671,45.4393458986277,45.4393724948041,45.4393713943227,45.439389305474,45.4394877064851,45.4395862974723,45.4396851082974,45.4397299025384,45.4397929085844,45.4399186951436,45.440143605354,45.4407641975999,45.441042992173,45.4411327962401,45.4411955110838,45.4412401961129,45.4412395943087,45.4412124090512,45.4409406943143,45.4409134017695,45.4408862007371,45.4409216947521,45.4409394961837,45.4410021999912,45.4411725107258,45.441289200035,45.4415767982567,45.4418641905533,45.4419539083163,45.4420883009888,45.4421772038586,45.4422662913468,45.4423288946737,45.4424184994073,45.4426338883531,45.4427507078792,45.4430382031706,45.4432090106932,45.4436046015155,45.4437483983916,45.4438563101683,45.4438921060522,45.443846908471,45.4437745985941,45.4432874940046,45.4428092936931,45.4427160830507,45.4426916099764,45.4426731980237,45.4426908976826,45.4427263001265,45.4428786982436,45.4429684098145,45.4431659961498,45.4433368006967,45.443516694659,45.443732595644,45.4440476922317,45.444605901282,45.4451550971955,45.4452271041938,45.4456140116435,45.4458748133272,45.4459465955117,45.4460722955701,45.4461169103698,45.4461256968604,45.446107201029,45.4460618917584,45.4459532036979,45.4458448000708,45.4457816089251,45.4457000895797,45.4455734902357,45.4455549975431,45.4455452941148,45.4455540093864,45.4456525871225,45.445850189075,45.4459670120094,45.4461018980576,45.4462277103174,45.4463597479219,45.4464256103272,45.4465515966966,45.4467137061066,45.4468758923572,45.4471822123672,45.4474436947223,45.4475610946323,45.4476782925255,45.4480572917465,45.4481565943204,45.4483281924735,45.4485366013893,45.4485827025049,45.4486736901695,45.4487372099701,45.4488185070348,45.448854697349,45.4489359979931,45.4490442924604,45.4491615126751,45.4493055958241,45.4494945048873,45.4496202045182,45.4498265955366,45.4498983084299,45.4499609918501,45.4500504968118,45.4501486041478,45.4501658913019,45.4501743978369,45.4502011987384,45.4502369951465,45.4502819006738,45.4504164035745,45.4507396083736,45.4509283065268,45.4510272013702,45.4512611948995,45.4515041993555,45.4515416804601,45.4515463419483,45.4516391982869,45.4519003112601,45.4522963066706,45.452476495212,45.4527465089815,45.4532594046175,45.4533941943296,45.4535021065265,45.453888513075,45.4544005994812,45.4549220001155,45.4550926875861,45.4554070085149,45.4557749938544,45.455819710145,45.4559096028604,45.4560803019895,45.4561163024381,45.4564126011523,45.4569068026024,45.4572306015712,45.4574554985162,45.4577074051338,45.4580945098438,45.4583376018424,45.4588507030633,45.4590486929331,45.4591800753947,45.4592286029082,45.4592825909205,45.4593185534967,45.4597682059868,45.4599479101077,45.4604964036638,45.4607031919357,45.4609730098017,45.4612787900159,45.4613958070474,45.4615753720462,45.4615754514444,45.4633112767878,45.4634895151149,45.463729483731,45.464625410935,45.4649085807366,45.4650256672019,45.4609918334902,45.457041551731,45.4532837666866,45.4531944779709,45.4514977294728,45.4511576021508,45.4510166678344,45.4507937756875]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":1,"fill":true,"fillColor":"black","fillOpacity":0,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[45.3930775592759,45.4650256672019],"lng":[-73.3293650622841,-73.2482168030423]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#exporter les résultats</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#st_write(SDR.chambly, "data//SDR_chambly.gpkg")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extraction-des-données-sur-les-commerces" class="level2">
<h2 class="anchored" data-anchor-id="extraction-des-données-sur-les-commerces">3. Extraction des données sur les commerces</h2>
<p>Il est maintenant temps d’interroger la base de données d’OSM pour extraire les données de commerces sur Chambly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#création d'une fonction pour effectuer plusieurs requête en même temps à l'aide du</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#paquet osmdata</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>get_osm_data <span class="ot">&lt;-</span> <span class="cf">function</span>(key, bbox) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Créer la requête</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="fu">opq</span>(<span class="at">bbox =</span> bbox) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_osm_feature</span>(<span class="at">key =</span> key)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Obtenir les données en tant que 'sf'</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  data_sf <span class="ot">&lt;-</span> <span class="fu">osmdata_sf</span>(query)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Colonnes à conserver</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    common_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"osm_id"</span>, <span class="st">"name"</span>, <span class="st">"addr:housenumber"</span>, <span class="st">"addr:street"</span>, <span class="st">"key"</span>, <span class="st">"geometry"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ajouter les colonnes manquantes si une catégorie n'en possède pas</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (col <span class="cf">in</span> common_cols) {</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span>(col <span class="sc">%in%</span> <span class="fu">names</span>(data_sf<span class="sc">$</span>osm_points))) {</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>      data_sf<span class="sc">$</span>osm_points <span class="ot">&lt;-</span> data_sf<span class="sc">$</span>osm_points <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">col :=</span> <span class="cn">NA</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Ajouter une colonne pour identifier les catégories</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  data_sf<span class="sc">$</span>osm_points<span class="sc">$</span>key <span class="ot">&lt;-</span> key</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># On conserve les données en points et les colonnes necessaires</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  data_sf<span class="sc">$</span>osm_points[, common_cols, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Définir la requête pour Chambly à l'aide du paquet osmdata</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>bbox <span class="ot">&lt;-</span> <span class="fu">getbb</span>(<span class="st">"Chambly, Québec, Canada"</span>) </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Liste des catégories à interroger</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"shop"</span>, <span class="st">"office"</span>, <span class="st">"amenity"</span>, <span class="st">"craft"</span>, <span class="st">"healthcare"</span>, <span class="st">"leisure"</span>, <span class="st">"tourism"</span>, <span class="st">"emergency"</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir les résultats</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>results_list <span class="ot">&lt;-</span> <span class="fu">map</span>(keys, <span class="cf">function</span>(key) <span class="fu">get_osm_data</span>(key, bbox))</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrer les éléments key null</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>results_list <span class="ot">&lt;-</span> <span class="fu">discard</span>(results_list, is.null)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="co">#combiner les résultats</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>chambly_data_sf <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(results_list) <span class="sc">|&gt;</span> <span class="fu">clean_names</span>()</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Éliminer les points qui servent de noeuds de bâtiments</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>chambly_data_sf <span class="ot">&lt;-</span> chambly_data_sf <span class="sc">|&gt;</span> </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(name)) <span class="sc">|&gt;</span> </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(osm_id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) </span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Effectuer une intersection des données avec le territoire de Chambly pour retirer</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co"># les données qui seraient hors zone</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>)</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>SDR.chambly <span class="ot">&lt;-</span> SDR.chambly <span class="sc">|&gt;</span>  <span class="fu">select</span>(geometry)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>chambly_data_sf <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(chambly_data_sf, SDR.chambly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploration-des-données" class="level2">
<h2 class="anchored" data-anchor-id="exploration-des-données">4. Exploration des données</h2>
<p>Nous allons utiliser le paquet skimr pour inspecter le jeu de données.</p>
<p>Les résultats nous indique que nous avons un jeu de données avec 203 lignes et 6 colonnes, toutes en format texte (character). On remarque plus bas qu’il manque beaucoup d’informations sur les adresses avec 145 données manquantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(chambly_data_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">chambly_data_sf</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">203</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 22%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">osm_id</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">203</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">addr_housenumber</td>
<td style="text-align: right;">145</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">addr_street</td>
<td style="text-align: right;">145</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">key</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">geometry</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">203</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="des-catégories-imparfaites" class="level3">
<h3 class="anchored" data-anchor-id="des-catégories-imparfaites">Des catégories imparfaites</h3>
<p>Si l’on regarde le nombre de commerces par catégorie, on remarque plusieurs problèmes. Le nombre de bureaux (office) et entreprises dans le domaine de la santé (healthcare) semblent sous-estimés. Il y a peut-être des chevauchement entre les autres catégories.</p>
<p>Regardons de plus près comment OSM définit les différentes catégories:</p>
<blockquote class="blockquote">
<p>Amenity: Used to map facilities used by visitors and residents. For example: toilets, telephones, banks, pharmacies, cafes, parking and schools</p>
<p>Healthcare: Also see Map features #Healthcare which includes healthcare features under amenity=*. There is a full list of healthcare features at Healthcare.</p>
<p>Leisure: This is used to tag leisure and sports facilities.</p>
<p>Office: An office is a place of business where administrative or professional work is carried out.</p>
<p>Shop: The shop tag is used as a place of business that has stocked goods for sale or sells services.</p>
<p>Tourism: This is used to map places and things of specific interest to tourists. For example these may be places to see, places to stay and things and places providing support.</p>
<p>Source: <a href="https://wiki.openstreetmap.org/wiki/Map_features" class="uri">https://wiki.openstreetmap.org/wiki/Map_features</a></p>
</blockquote>
<p>On voit que certaines entreprises dans le domaine de la santé peuvent aussi être regroupés avec ‘Amenity’ et que certains services comme les banques pourraient aussi bien se trouver dans les bureaux. Il y aussi des commerces qui sont parfois dans une catégories, parfois dans une autre comme le Pétro-Canada qui est classé dans ‘Shop’ et Esso dans ‘Amenity’. Finalement, si on se concentre sur les entreprises, il y aurait certaines données à éliminer comme les écluses qui sont dans la catégorie ‘Tourism’. Le mieux ici serait d’adopter une catégorisation personnalisée pour chacune des entreprises mais ce n’est pas le but de l’exercice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nombre de commerces par catégorie (key)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>nombre_par_categorie <span class="ot">&lt;-</span> chambly_data_sf <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(key) <span class="sc">|&gt;</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
# Groups:   key [6]
  key            n
  &lt;chr&gt;      &lt;int&gt;
1 shop          94
2 amenity       79
3 office        10
4 leisure        9
5 tourism        9
6 healthcare     2</code></pre>
</div>
</div>
</section>
<section id="les-principales-rues-commerçantes" class="level3">
<h3 class="anchored" data-anchor-id="les-principales-rues-commerçantes">Les principales rues commerçantes</h3>
<p>Si l’on se fie au jeu de données, le Boulevard de Périgny serait le lieu principal de l’activité commerciale. Toutefois, avec 145 données manquantes sur un jeu de données de 203 entrées, il est périlleux de se fier au jeu de données pour identifier les principales rues commerçantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nombre_rue <span class="ot">&lt;-</span> chambly_data_sf <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(addr_street) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 2
# Groups:   addr_street [11]
   addr_street              n
   &lt;chr&gt;                &lt;int&gt;
 1 &lt;NA&gt;                   145
 2 Boulevard De Périgny    30
 3 Avenue Bourgogne        13
 4 Boulevard Fréchette      7
 5 Grand Boulevard          2
 6 Boulevard Brassard       1
 7 Boulevard Industriel     1
 8 Rue Irénée-Auclaire      1
 9 Rue Larivière            1
10 Rue Petrozza             1
11 Rue Sénécal              1</code></pre>
</div>
</div>
</section>
<section id="visualisation-des-données" class="level3">
<h3 class="anchored" data-anchor-id="visualisation-des-données">Visualisation des données</h3>
<p>Nous allons visualiser les données avec une carte leaflet. Les nombreux points sur le Boulevard de Périgny semble confirmer qu’il s’agit de la principale artère de la Ville avec l’Avenue Bourgogne. On remarque aussi une grappe d’entreprise à l’intersection du Boulevard Anne-Le-Seigneur et du Boulevard Fréchette.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#visualiser les résultats sur une carte leaflet</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">data =</span> SDR.chambly, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">opacity =</span> <span class="dv">1</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">weight =</span> <span class="dv">1</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">fillOpacity =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">data =</span> chambly_data_sf,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">popup =</span> <span class="sc">~</span>name, </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">radius =</span> <span class="dv">5</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weight =</span> <span class="dv">1</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fillColor =</span> <span class="st">"dodgerblue"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">opacity =</span> <span class="fl">0.75</span>,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fillOpacity =</span> <span class="fl">0.75</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9c05425a07e967d5ab83" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9c05425a07e967d5ab83">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-73.2732907241855,-73.2732804203227,-73.27271991158,-73.2694829036572,-73.2694517339228,-73.2671621957835,-73.2645863934244,-73.2620105177128,-73.2611279868106,-73.2596932515875,-73.2567033654378,-73.2544530022947,-73.2568373983497,-73.2578659272733,-73.2575002390241,-73.2570190164631,-73.2558289400512,-73.2557000858642,-73.2555089284702,-73.254915402035,-73.2545154895953,-73.2538369366937,-73.2533788176766,-73.2527361660814,-73.2525088523635,-73.2523599067743,-73.2519941033572,-73.2518647338642,-73.2517197122686,-73.250756598907,-73.2505000103079,-73.2502703887768,-73.2502361007305,-73.2502137907089,-73.2502015164414,-73.2499681229196,-73.2488754856336,-73.2482179314574,-73.2482170427259,-73.2482168030423,-73.2486874245392,-73.2490258643336,-73.2493221823268,-73.2493250870829,-73.2493333005515,-73.2493540149489,-73.2492087907552,-73.2491847263313,-73.2501604229307,-73.2633942055526,-73.2662816004771,-73.2772098768563,-73.2822188498092,-73.2822341050894,-73.2823384087266,-73.2828081495546,-73.2834155005785,-73.2840601901386,-73.2841577149372,-73.2842365695484,-73.2889149494901,-73.2897337244401,-73.2922301664909,-73.2930574438697,-73.2955531852946,-73.2956468364337,-73.2976090902761,-73.299117536337,-73.3000386219638,-73.3028546283819,-73.3057927604864,-73.3081280307318,-73.3083433951971,-73.3085874229454,-73.3129439850875,-73.3132435833904,-73.3135911594172,-73.3149079221471,-73.3151466360118,-73.315293787652,-73.3154149597335,-73.3158719207488,-73.3156709368451,-73.3156521888218,-73.3152552688006,-73.3114584441131,-73.3114673679402,-73.3182110624761,-73.3184420997462,-73.3194088254131,-73.3268299970936,-73.3288896000613,-73.3291052407531,-73.3293650622841,-73.3293140060706,-73.3289810868241,-73.3285843893322,-73.3284054023138,-73.3274852027326,-73.3273318993113,-73.3272550889523,-73.3271912100105,-73.3270121140182,-73.3269736116503,-73.3268199923938,-73.3266150088699,-73.3264864105434,-73.3263961102803,-73.3263568002135,-73.3263308937947,-73.3262663956154,-73.3261764928724,-73.3260483982845,-73.325869217342,-73.325459806861,-73.3252167908882,-73.3245139186037,-73.3243732082415,-73.3240532849733,-73.3237718051208,-73.3236308925726,-73.3235668888232,-73.3235282787848,-73.3234511169694,-73.3233737958496,-73.3232312963723,-73.3230896968462,-73.3229617048994,-73.322795204023,-73.3226161857838,-73.3222328153181,-73.3220665975444,-73.3209170201563,-73.3208021069561,-73.3206233170934,-73.3203036030509,-73.32020130804,-73.3199966163344,-73.3195612885783,-73.3193820187217,-73.3191510931419,-73.3188306139168,-73.3186513107031,-73.3182802133947,-73.3176023987435,-73.3170652131464,-73.3168094031078,-73.3165917983223,-73.3162077018599,-73.3160665893249,-73.3158227948873,-73.3157071005435,-73.3155142041438,-73.3154241850713,-73.3153216041926,-73.3152192849325,-73.3150916083871,-73.3149255847118,-73.3141985209302,-73.313420316797,-73.3130642497685,-73.3129605979222,-73.3127048939215,-73.3125259828502,-73.3122190825995,-73.3118350854233,-73.3116557985795,-73.311463317068,-73.3113221046372,-73.3112832956671,-73.3112569925768,-73.311345394688,-73.3115481034344,-73.3116869101106,-73.311699383106,-73.3116725044426,-73.3115822049952,-73.3115053121583,-73.311325795508,-73.3110956134465,-73.310942197582,-73.3106226973981,-73.3104309903391,-73.3100095030652,-73.309754201209,-73.309626611327,-73.3093329119787,-73.3089752944149,-73.3086686018546,-73.3082468003875,-73.3080676871795,-73.3078501932838,-73.3076449045872,-73.3075167107109,-73.3074523196375,-73.3073623917273,-73.3073449240424,-73.3073362005706,-73.3073485073824,-73.307398996877,-73.3074879894858,-73.307755408471,-73.3081124993694,-73.3083039126216,-73.3084824924751,-73.3091076167231,-73.3092607078037,-73.3096436184509,-73.3104865967488,-73.3111896161546,-73.3118286017997,-73.312084102933,-73.312275493305,-73.3124031947072,-73.31263300802,-73.312798910694,-73.3129136058419,-73.3129899116415,-73.3129637121703,-73.3128098038012,-73.3124767883365,-73.3122976054034,-73.3121055968904,-73.3118112102546,-73.3112610800366,-73.310826409721,-73.3105323199541,-73.3104172162522,-73.3103404180808,-73.3102506809688,-73.3099945933559,-73.309533208546,-73.3093664139823,-73.3093275971996,-73.3093268058255,-73.3093643899094,-73.309367854375,-73.3093682693531,-73.3093768034059,-73.3094654097064,-73.3095279790279,-73.3096040885188,-73.309641495068,-73.3096526089277,-73.3095627138805,-73.3094599830518,-73.30916460061,-73.308689814144,-73.3083684036109,-73.3082271940312,-73.3078297945688,-73.3072660201805,-73.3071635010678,-73.3071121010292,-73.3068813939724,-73.3068555858167,-73.3065095105958,-73.3060858003931,-73.3059696123624,-73.3059560084649,-73.3059551077334,-73.3060178101719,-73.3061192905773,-73.3062325844409,-73.3062318943878,-73.3062127851034,-73.3062057099251,-73.3061926973534,-73.3061793386489,-73.3060119824819,-73.3058963925728,-73.3055876169453,-73.3055484910484,-73.3054451895357,-73.3053547895009,-73.305341508718,-73.3053161811236,-73.3051896057672,-73.2931323910137,-73.2920055258535,-73.2904880848828,-73.2826022879486,-73.2810769708284,-73.2804462106877,-73.2773195020087,-73.2742581621043,-73.2736762527984,-73.2736624331615,-73.2733997226938,-73.273347050249,-73.2733252218361,-73.2732907241855],"lat":[45.4507937756875,45.4507272852428,45.4506308750097,45.4497853090569,45.4497750032253,45.4490181364777,45.4479044721819,45.4466054882803,45.4460516177343,45.4450346830052,45.441814659061,45.4391989208605,45.4387270393082,45.4385667459738,45.4383367312438,45.4379879451411,45.437030542865,45.43682993468,45.4365323149993,45.4355182687835,45.4349939666082,45.4342090905778,45.4330867790038,45.4318029959341,45.4312762137213,45.4309749270639,45.429368252447,45.4290020244277,45.4287331949859,45.4263954770613,45.4258099922313,45.4248273553153,45.4246644144349,45.4245249046004,45.4244482884404,45.4239806331482,45.42342786475,45.4214508794076,45.4201497720607,45.4198000802522,45.4177986151295,45.4163592900608,45.4146341462301,45.4146171794125,45.4145828041267,45.4144958730996,45.4137934472054,45.4134940776596,45.413395453179,45.4123159043429,45.4098895749462,45.4087659819976,45.4087114082999,45.4102257169185,45.4104181978712,45.4103604986639,45.4105203880456,45.4107201173351,45.4104354643937,45.4101960282472,45.3956071418315,45.3930775592759,45.3948176106488,45.3953958524246,45.3971481034946,45.3972173114496,45.3985985001395,45.3996602535183,45.4003076418573,45.4022751394849,45.4043559018109,45.4059777067897,45.4061311685818,45.4063764413383,45.4092927886714,45.4095085879157,45.409759035304,45.4106804951353,45.4108452156275,45.4109468014087,45.4110303642878,45.4113426003489,45.4119521901637,45.4120092056146,45.4133564957611,45.4247888703691,45.4247951454885,45.4295410896238,45.4296997809874,45.4304012421499,45.4357852044065,45.4371099043581,45.4370994865833,45.4370653039056,45.4371022077293,45.4372726032237,45.4374070064972,45.43744269044,45.4374142892794,45.4374141060086,45.4374228890483,45.4374318128297,45.4375036066821,45.437530605175,45.437593188365,45.4377369130383,45.4379887102963,45.4383124890909,45.4386004086995,45.4387174069306,45.4388972036157,45.4390411027437,45.4391488880233,45.4392294931671,45.4393458986277,45.4393724948041,45.4393713943227,45.439389305474,45.4394877064851,45.4395862974723,45.4396851082974,45.4397299025384,45.4397929085844,45.4399186951436,45.440143605354,45.4407641975999,45.441042992173,45.4411327962401,45.4411955110838,45.4412401961129,45.4412395943087,45.4412124090512,45.4409406943143,45.4409134017695,45.4408862007371,45.4409216947521,45.4409394961837,45.4410021999912,45.4411725107258,45.441289200035,45.4415767982567,45.4418641905533,45.4419539083163,45.4420883009888,45.4421772038586,45.4422662913468,45.4423288946737,45.4424184994073,45.4426338883531,45.4427507078792,45.4430382031706,45.4432090106932,45.4436046015155,45.4437483983916,45.4438563101683,45.4438921060522,45.443846908471,45.4437745985941,45.4432874940046,45.4428092936931,45.4427160830507,45.4426916099764,45.4426731980237,45.4426908976826,45.4427263001265,45.4428786982436,45.4429684098145,45.4431659961498,45.4433368006967,45.443516694659,45.443732595644,45.4440476922317,45.444605901282,45.4451550971955,45.4452271041938,45.4456140116435,45.4458748133272,45.4459465955117,45.4460722955701,45.4461169103698,45.4461256968604,45.446107201029,45.4460618917584,45.4459532036979,45.4458448000708,45.4457816089251,45.4457000895797,45.4455734902357,45.4455549975431,45.4455452941148,45.4455540093864,45.4456525871225,45.445850189075,45.4459670120094,45.4461018980576,45.4462277103174,45.4463597479219,45.4464256103272,45.4465515966966,45.4467137061066,45.4468758923572,45.4471822123672,45.4474436947223,45.4475610946323,45.4476782925255,45.4480572917465,45.4481565943204,45.4483281924735,45.4485366013893,45.4485827025049,45.4486736901695,45.4487372099701,45.4488185070348,45.448854697349,45.4489359979931,45.4490442924604,45.4491615126751,45.4493055958241,45.4494945048873,45.4496202045182,45.4498265955366,45.4498983084299,45.4499609918501,45.4500504968118,45.4501486041478,45.4501658913019,45.4501743978369,45.4502011987384,45.4502369951465,45.4502819006738,45.4504164035745,45.4507396083736,45.4509283065268,45.4510272013702,45.4512611948995,45.4515041993555,45.4515416804601,45.4515463419483,45.4516391982869,45.4519003112601,45.4522963066706,45.452476495212,45.4527465089815,45.4532594046175,45.4533941943296,45.4535021065265,45.453888513075,45.4544005994812,45.4549220001155,45.4550926875861,45.4554070085149,45.4557749938544,45.455819710145,45.4559096028604,45.4560803019895,45.4561163024381,45.4564126011523,45.4569068026024,45.4572306015712,45.4574554985162,45.4577074051338,45.4580945098438,45.4583376018424,45.4588507030633,45.4590486929331,45.4591800753947,45.4592286029082,45.4592825909205,45.4593185534967,45.4597682059868,45.4599479101077,45.4604964036638,45.4607031919357,45.4609730098017,45.4612787900159,45.4613958070474,45.4615753720462,45.4615754514444,45.4633112767878,45.4634895151149,45.463729483731,45.464625410935,45.4649085807366,45.4650256672019,45.4609918334902,45.457041551731,45.4532837666866,45.4531944779709,45.4514977294728,45.4511576021508,45.4510166678344,45.4507937756875]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":1,"fill":true,"fillColor":"black","fillOpacity":0,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[45.4496361,45.4560312,45.4559845,45.452079,45.4531057,45.4522376,45.4530825,45.4493672,45.4490787,45.4491635,45.4499773,45.4491607,45.4516539,45.4514884,45.4489997,45.4516244,45.4492205,45.4539758,45.450159,45.4493164,45.4526068,45.4514274,45.4437447,45.4439311,45.4433833,45.4436472,45.443519,45.4435821,45.4435573,45.4435152,45.443716,45.4273512,45.4471706,45.4475457,45.4435177,45.4435568,45.448131,45.4480235,45.4483971,45.4484168,45.447989,45.4473553,45.449069,45.4483252,45.4477595,45.4525481,45.4534022,45.4428174,45.4411732,45.4490752,45.4475861,45.4463439,45.4479848,45.4480441,45.4444232,45.4464175,45.4464556,45.4570686,45.4581284,45.458604,45.4544933,45.4548322,45.4552887,45.4560301,45.4525198,45.4522794,45.4551636,45.4551661,45.4546063,45.4563255,45.4560814,45.4552925,45.4552811,45.4549556,45.4546739,45.4540138,45.4538627,45.4531834,45.4532131,45.4529039,45.4536473,45.4538374,45.4519188,45.4526085,45.4525175,45.4524028,45.4514924,45.4510656,45.451071,45.4509497,45.4518155,45.4514752,45.4474966,45.4273985,45.4477395,45.454506,45.4529663,45.4522776,45.4555763,45.4534387,45.4522653,45.4512345,45.4510215,45.4441864,45.452003,45.4315484,45.443164,45.4433253,45.44781,45.4475135,45.4562429,45.4563851,45.4474243,45.4397264,45.4564014,45.4529983,45.4534711,45.4531896,45.4558134,45.4545811,45.4547558,45.4521173,45.4537153,45.4513737,45.4508394,45.443367,45.4434674,45.4324809,45.4447609,45.427927,45.4276785,45.4315494,45.4464466,45.4474974,45.4475784,45.4272722,45.4279857,45.4279062,45.4278257,45.4482402,45.4472723,45.4474645,45.4473996,45.4472589,45.447862,45.448221,45.4469921,45.4472836,45.4478808,45.4476711,45.4477781,45.4496955,45.4504959,45.4346193,45.4469618,45.4271646,45.4476742,45.4523481,45.4475425,45.4450939,45.4441549,45.4460151,45.4541758,45.4538377,45.4560409,45.4526367,45.4556008,45.4558873,45.4551139,45.4556626,45.4529717,45.4526632,45.4533129,45.4521816,45.4519094,45.451056,45.4519128,45.4515155,45.4518618,45.461468,45.4439736,45.4281703,45.427092,45.4522847,45.451865,45.447345,45.4487511,45.4478519,45.4488667,45.4589136,45.4551598,45.45509,45.4508859,45.4509839,45.4437184,45.4429459,45.4423947,45.4404526,45.4379906,45.4478255,45.4474455,45.4473483,45.4471858],[-73.2935865,-73.3033317,-73.3036496,-73.3007008,-73.3019114,-73.3006184,-73.3019043,-73.29558,-73.2940206,-73.2951212,-73.2964313,-73.2948633,-73.2999249,-73.300081,-73.2947008,-73.300002,-73.2949587,-73.2991852,-73.2965917,-73.2954769,-73.2982455,-73.3000036,-73.2764142,-73.2783426,-73.2758044,-73.2762241,-73.2751911,-73.2756626,-73.2753819,-73.276295,-73.2762609,-73.3111406,-73.2874147,-73.2883613,-73.3021212,-73.302377,-73.2876545,-73.2874606,-73.2923457,-73.2918812,-73.2877435,-73.2858128,-73.2935099,-73.2923578,-73.2858337,-73.3018827,-73.2999665,-73.2781493,-73.2715288,-73.2896831,-73.2888829,-73.2846179,-73.2918082,-73.291958,-73.2883834,-73.2878893,-73.2881172,-73.3034206,-73.3046511,-73.3055356,-73.3024918,-73.3026162,-73.3031093,-73.3030071,-73.3018443,-73.3022299,-73.3017509,-73.3013597,-73.301485,-73.3013797,-73.3012618,-73.3005183,-73.3005146,-73.3001118,-73.2995483,-73.301467,-73.3014214,-73.2996669,-73.2992707,-73.2987633,-73.2988085,-73.299731,-73.3006594,-73.2984606,-73.298194,-73.2980569,-73.3000866,-73.2992767,-73.2992863,-73.2970232,-73.2974842,-73.2965476,-73.2865952,-73.3113619,-73.2857189,-73.3024954,-73.3018726,-73.3022379,-73.3007852,-73.3001004,-73.2979155,-73.2993758,-73.2969872,-73.264987,-73.3016984,-73.3047356,-73.3024301,-73.3024433,-73.2846269,-73.2867142,-73.3013183,-73.3014387,-73.2862068,-73.2728069,-73.3033436,-73.3018772,-73.3001104,-73.301935,-73.301993,-73.3016066,-73.3013522,-73.3007307,-73.3013154,-73.2999312,-73.2986394,-73.2763052,-73.2749485,-73.3039785,-73.2740302,-73.3109761,-73.3097018,-73.3050215,-73.286117,-73.2842215,-73.284163,-73.310835,-73.3095637,-73.3096077,-73.3096388,-73.292377,-73.2848226,-73.2864002,-73.2860309,-73.2846682,-73.2844164,-73.2908923,-73.2839603,-73.2794437,-73.2847241,-73.2851837,-73.2860653,-73.2954358,-73.2966733,-73.29174,-73.2875841,-73.310892,-73.2841871,-73.3020069,-73.2892004,-73.2873253,-73.2883724,-73.2868624,-73.3025498,-73.3023482,-73.3032223,-73.3017353,-73.3018787,-73.3017445,-73.3012243,-73.30091,-73.3008847,-73.3008459,-73.2985933,-73.3007715,-73.3006517,-73.2968729,-73.2976935,-73.2918866,-73.2913425,-73.2962012,-73.2644806,-73.3105519,-73.3099233,-73.3022359,-73.3003708,-73.2822357,-73.2743675,-73.2830054,-73.2934771,-73.3043017,-73.3013391,-73.3011794,-73.2971162,-73.2970773,-73.2736866,-73.2712769,-73.2695898,-73.2634257,-73.2577135,-73.2832232,-73.2781054,-73.2839783,-73.2801194],5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1,"opacity":0.75,"fill":true,"fillColor":"dodgerblue","fillOpacity":0.75},null,null,["Cyclo-Sprint","Spoutnik","Fido et Félix","Bell","Iris","Bongia","Chambly Coiffure","Club Voyages Daniel","La Coutellerie","Opticien Josée Touchette","Les Pneus Robert Bernard","Coiffure Elle et Lui","MIssion Beauté Clinique Esthétique","La papillote en fête","Nettoyeur Daoust/forget","Coiffure Mode Elle et Lui","Bronzage Tropique Plus","La Cave du Sommelier","Adrenaline","Serge Guérard","Salon de coiffure Super Style","Centre Auditif","Concept Musoul Nutrition","Lebeau","Midas","Dékosol","Aspirateur Chambly","Pièces d'autos fort Chambly","Fenestration DANA","Equimed","L'art de Transformer","Lunetterie New Look","Rossy #276","Librairie Larico","Le Maître Glacier","Assure-IT","Boutique cadeaux","La maison gourmande","Scalp Coiffure","Baño","Le petit détour","Cycles Performance","sports expert","Arachide Dépôt","Les Épices de Marie Michèle","Couche-Tard","Dollar Extra Plus","Pneus Chartrand","Carquest","Centre nautique Gervais-Désourdy","Metro","Maxi","Petro-Canada","Garage Bernard Chagnon et frères","Accès Physio","Animalerie Chambly","SAQ Sélection","Hyundai","Autobus Chambly","Nissan","InfoSign Media","Honda Chambly","Kia Motors Chambly","Dépanneur Richelieu","Couche-Tard","Divine Espace Beauté","L'Optik","Cabana Sol","Couche-Tard","Clinique Nature Beauté Santé","Distributions EMI","Nettoyeur Bourgogne Inc.","La Vape du Fort","OK Pneus","Garage Luc Noiseux","Le 24Karat Salon de Barbier","La maison du zéro déchet Épicerie Vrac","Chaussures Pop","SSens Coiffure Chambly","Ultramar","Chambly Auto Transmission","Coiffure Beaute Bella Gi","Centre Musical EMF","Dépanneur 7/23","Malicia Boutique-Atelier","Salon 4 Pattes","Les trésors de Kilini","Fleuriste Dessureault","La Maison Darche Services Funéraires","Coiffure Naja Elle & Lui","4 Pattes Inc.","Aux Sources du Bassin de Chambly","Shell","Chico","Le journal de Chambly","Monty Jacques Firme d'architectes en Montérégie","Notaire Me Lyne Darche","Tchasly Services Comptables","Scott-Avon CPA","RE/MAX","L'appui-Tête Psychologie Et Orthopédagogie","Sogenix Groupe de Conseil","H&R Block","Cayer Ouellette et Associés Avocats","Caisse Populaire du bassin de Chambly","Jean Coutu","Pharmacie Brunet","Centre médical de Chambly","Vélo-Chambly","Shell","Centre dentaire Vincent & LaPointe","Tecnic","Restaurant Le Bergerac","Centre de formation du Richelieu","Eggsquis","Subway","Restaurant Elie Shish Taouk","Pizza Donini","Le petit Québec","Esso","Lave-Auto Aquajet","Sushi Shop","Location Delvan","Centre dentaire Khanh Vu","Centre Dentaire Ruel & Ass","Le Bouddhi Gourmet","Buffet suprême","Stationnement incitatif de Chambly","Garderie Popeska","Tim Hortons","Banque de Montréal","Subway","Bedondaine & Bedons Ronds","Le Roi du Hot-Dog","Marius de Chambly","RBC Banque Royale","Presse Café","Yuzu Sushi","Clinique vétérinaire Anne-Le Seigneur","Valentine","Le vieux Bourgogne","La cochonne rit","Le temps d'une pause","Bistro Le vieux Bourgogne","Locations Moto-Marine Sport","Résidence des Bâtisseurs","L'éclusier Bar Lounge","Bar Mon Repos","Les grillades du Fort","Hypotheca","Bistro Champêtre Bonté Divine","Carrefour Familial du Richelieu","Club FADOQ du bassin de Chambly","Esso","Familiprix Extra","La Croisée des chemins","MJ et cie","Shack Attakk","Canada Post","Hôpital Vétérinaire Chambly","Clinique dentaire Leblanc & Martel","CIBC","Jean Coutu","Rotisserie Benny et Cie","M. Shish Taouk","Couche-Tard","Thaï Express","Le Petit Québec","Hiro Sushi Chambly","Médico-Esthétique Montérégie Dr. Céline Daigneault","McDonald's","Tim Hortons","Église du Sentier de la Vallée du Richelieu","Gyro Boutique Chambly","Centre Musical EMF","Le Salvatore","Casa Chambly","Église Saint-Joseph de Chambly","Paroisse de l'Église Saint-Joseph de Chambly","Manoir Soleil","Viridi Café","Glace-Ô-Bec","McDonald's","Osthéopathie Chambly","Clinique Chiropratique de Chambly","Marina de Chambly","Lieu historique national du Fort-Chambly","Canal-de-Chambly","Club proForm","Synergie Elite","Karaté Sportif Chambly","Studio Pura Yoga","Salon de Quilles Chambly","Epic Gym","Écluse 4","Écluse 5","Écluse 6","Écluse 7","Écluse 8","Écluses 1,2,3","Bureau Touristique de Chambly","Guides Touristiques De Chambly","Motel mon repos"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[45.3930775592759,45.4650256672019],"lng":[-73.3293650622841,-73.2482168030423]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exporter les résultats</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#st_write(chambly_data_sf, "data//commerces_chambly.gpkg")</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sauvegarder une version du document en PDF</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>renderthis<span class="sc">::</span><span class="fu">to_pdf</span>(<span class="st">"collect_documentation.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>